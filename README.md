
# stackr <img src="man/figures/logo.png" align="right" height="160" alt="" />

<!-- badges: start -->

[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://tidyverse.org/lifecycle/#experimental)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/stackr)](http://cran.r-project.org/package=stackr)
[![Project Status: Active – The project has reached a stable, usable
state and is being actively
developed.](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active)
[![DOI](https://zenodo.org/badge/14548/thierrygosselin/stackr.svg)](https://zenodo.org/badge/latestdoi/14548/thierrygosselin/stackr)
[![packageversion](https://img.shields.io/badge/Package%20version-2.2.2-orange.svg)](commits/master)
[![Last-changedate](https://img.shields.io/badge/last%20change-2025--04--02-brightgreen.svg)](/commits/master)
[![minimal R
version](https://img.shields.io/badge/R%3E%3D-3.4.0-6666ff.svg)](https://cran.r-project.org/)
<!-- badges: end -->

# stackr: an R package to run stacks software pipeline

This is the development page of **stackr**.

**stackr** package provides wrapper functions to run
[STACKS](http://catchenlab.life.illinois.edu/stacks/) *process_radtags*,
*ustacks*, *cstacks*, *sstacks*, *tsv2bam*, *gstacks* and *populations*
inside R. **What’s the differences with running stacks directly in the
terminal?** Besides running
[STACKS](http://catchenlab.life.illinois.edu/stacks/) within R, tiny
differences here and there that speed up a LOT my RADseq workflow and
makes the [STACKS](http://catchenlab.life.illinois.edu/stacks/)
experience more fun and more reproducible.

- `build_stackr_workflow_dir`: The philosophy of working by project with
  pre-organized folders.
- `run_process_radtags`:
  - more sequencing chips/lanes = MORE parallelization than
    [STACKS](http://catchenlab.life.illinois.edu/stacks/).
  - **Technical replicates**, inside or across chip/lanes are managed
    uniquely.
  - **Noise reduction**: Before or after demultiplexing the lanes.
  - **Data normalization**: When sequencing effort is uneven and creates
    biases.
- ***de novo* assembly**:
  - `run_ustacks` manage
    [STACKS](http://catchenlab.life.illinois.edu/stacks/) unique integer
    (*previously called SQL IDs*).
  - **Mismatch testing:** *de novo* mismatch threshold series is
    integrated inside `run_ustacks`. Tables and figures are
    automatically produced to help pick the right thresholds.
- `run_cstacks`:
  - The *catalog* step in
    [STACKS](http://catchenlab.life.illinois.edu/stacks/). is not
    problematic with small project of 500 samples.
  - With more than 1000 samples, this step becomes time consuming,
    critical if something crash and just more frustrations.
  - stackr breaks downs the catalog creation in several steps making the
    pipeline more rigorous if your computer/cluster/server crash.
  - It also allows you to test different catalog and sample number,
    while the program generates another catalog with more samples…
- **run_ustacks, run_cstacks and run_sstacks**: can be restarted if the
  computer/cluster/server crash. Just restart the same function. stackr
  takes care of the rest.
- **logs** generated by
  [STACKS](http://catchenlab.life.illinois.edu/stacks/) are read and
  summarized in human-readable tables/tibbles. Detecting problems is
  easier.

**Who’s it for?**

- I don’t offer help for this package. Sorry. Use it at your own risk.
- It’s not for R or stacks beginners.
- It’s currently developed with my own projects in mind, I just make it
  available for others.
- To help collaborators to get the most out of stacks.
- [STACKS](http://catchenlab.life.illinois.edu/stacks/) related issues
  should be highlighted in [stacks google
  group](https://groups.google.com/forum/?fromgroups#!forum/stacks-users).

## Installation

To try out the dev version of **stackr**, copy/paste the code below:

``` r
if (!require("devtools")) install.packages("devtools")
devtools::install_github("thierrygosselin/stackr")
library(stackr)
```

## Vignette

- [Get started
  section](http://thierrygosselin.github.io/stackr/articles/stackr.html)
- Web site with additional info:
  [stackr](http://thierrygosselin.github.io/stackr/)
- [Computer setup and
  troubleshooting](https://thierrygosselin.github.io/radiator/articles/rad_genomics_computer_setup.html)
- [Vignettes](https://thierrygosselin.github.io/radiator/articles/index.html)

## Citation:

To get the citation, inside R:

``` r
citation("stackr")
```

## Stacks modules and RADseq typical workflow

**stackr** package provides wrapper functions to run
[STACKS](http://catchenlab.life.illinois.edu/stacks/) *process_radtags*,
*ustacks*, *cstacks*, *sstacks*, *tsv2bam*, *gstacks* and *populations*
inside R.

Below, a flow chart showing the corresponding stacks modules and stackr
corresponding functions. ![](vignettes/stackr_workflow.png) \## Life
cycle

stackr is quite mature, i’ve used it for almost 5 years with dozens of
projects, but changes are inevitable.

- For reproducibility, if you use it, keep a copy safe.
- I follow [STACKS](http://catchenlab.life.illinois.edu/stacks/)
  development closely, when a new version comes out, stackr will likely
  change as well.
- Because of it’s intrinsic nature, stackr will not be compatible with
  previous [STACKS](http://catchenlab.life.illinois.edu/stacks/)
  version.
- Philosophy, major changes and deprecated functions/arguments are
  documented in life cycle section of functions.
- The latest changes are documented in [changelog, versions, new
  features and bug
  history](http://thierrygosselin.github.io/stackr/news/index.html)
- [issues](https://github.com/thierrygosselin/stackr/issues/new/choose)
  and
  [contributions](https://github.com/thierrygosselin/stackr/issues/new/choose)
